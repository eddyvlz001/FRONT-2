{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nexport let AuthFormComponent = /*#__PURE__*/(() => {\n  class AuthFormComponent {\n    constructor(http) {\n      this.http = http;\n      this.email = '';\n      this.password = '';\n      this.isLoginMode = true; // true = Login, false = Registro\n\n      this.login = new EventEmitter();\n    }\n\n    toggleMode() {\n      this.isLoginMode = !this.isLoginMode;\n      this.email = '';\n      this.password = '';\n    }\n\n    onSubmit() {\n      if (this.isLoginMode) {\n        this.http.post('http://localhost:3000/api/auth/login', {\n          email: this.email,\n          password: this.password\n        }).subscribe({\n          next: data => {\n            alert('Login exitoso');\n            this.login.emit(data);\n            localStorage.setItem('token', data.token);\n          },\n          error: err => {\n            var _a;\n\n            return alert('Error en login: ' + (((_a = err.error) === null || _a === void 0 ? void 0 : _a.message) || 'Error desconocido'));\n          }\n        });\n      } else {\n        this.http.post('http://localhost:3000/api/auth/register', {\n          email: this.email,\n          password: this.password\n        }).subscribe({\n          next: data => {\n            alert('Registro exitoso');\n            this.login.emit(data);\n            this.toggleMode(); // Cambiar a login después de registrar\n          },\n          error: err => {\n            var _a;\n\n            return alert('Error en registro: ' + (((_a = err.error) === null || _a === void 0 ? void 0 : _a.message) || 'Error desconocido'));\n          }\n        });\n      }\n    }\n\n  }\n\n  AuthFormComponent.ɵfac = function AuthFormComponent_Factory(t) {\n    return new (t || AuthFormComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n\n  AuthFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AuthFormComponent,\n    selectors: [[\"app-auth-form\"]],\n    outputs: {\n      login: \"login\"\n    },\n    decls: 12,\n    vars: 6,\n    consts: [[1, \"auth-container\"], [3, \"ngSubmit\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", \"placeholder\", \"Email\", \"autocomplete\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", \"placeholder\", \"Password\", \"autocomplete\", \"current-password\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\"], [1, \"toggle-text\"], [1, \"toggle-button\", 3, \"click\"]],\n    template: function AuthFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function AuthFormComponent_Template_form_ngSubmit_3_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(4, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function AuthFormComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function AuthFormComponent_Template_input_ngModelChange_5_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"button\", 4);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"p\", 5);\n        i0.ɵɵtext(9);\n        i0.ɵɵelementStart(10, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AuthFormComponent_Template_button_click_10_listener() {\n          return ctx.toggleMode();\n        });\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.isLoginMode ? \"Iniciar Sesi\\u00F3n\" : \"Registro\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.email);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.isLoginMode ? \"Entrar\" : \"Registrar\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.isLoginMode ? \"\\u00BFNo tienes cuenta?\" : \"\\u00BFYa tienes cuenta?\", \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.isLoginMode ? \"Reg\\u00EDstrate\" : \"Inicia sesi\\u00F3n\", \" \");\n      }\n    },\n    dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.NgModel, i2.NgForm],\n    styles: [\".auth-container[_ngcontent-%COMP%]{max-width:350px;margin:40px auto;padding:20px;box-shadow:0 2px 8px #0003;border-radius:8px;background-color:#fff;font-family:Arial,sans-serif}.auth-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}.auth-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.auth-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 10px;margin-bottom:15px;border:1px solid #bbb;border-radius:4px;font-size:16px;outline:none;transition:border-color .3s}.auth-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff}.auth-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{padding:12px;background-color:#007bff;border:none;border-radius:4px;color:#fff;font-weight:700;font-size:16px;cursor:pointer;transition:background-color .3s}.auth-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}.toggle-text[_ngcontent-%COMP%]{text-align:center;margin-top:15px;color:#666;font-size:14px}.toggle-button[_ngcontent-%COMP%]{background:none;border:none;color:#007bff;font-weight:700;cursor:pointer;margin-left:5px;font-size:14px}.toggle-button[_ngcontent-%COMP%]:hover{text-decoration:underline}\"]\n  });\n  return AuthFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}